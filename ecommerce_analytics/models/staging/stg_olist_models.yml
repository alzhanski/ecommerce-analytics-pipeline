version: 2

models:
  - name: customers
    description: Staged customer data from Olist.
    columns:
      - name: customer_unique_id
        description: "{{ doc('customers') }}"
        data_tests:
          - not_null
  - name: orders
    description: Staged orders data from Olist
    columns:
    - name: order_id
      description: The primary key for orders 
      data_tests:
        - unique
        - not_null
    - name: order_customer_id
      description: The foreign key references customers data
      data_tests:
        - relationships:
            arguments:
              to: ref('customers')
              field: order_customer_id
    - name: order_status
      data_tests:
        - accepted_values:
            arguments:
              values: ['shipped', 'unavailable', 'invoiced', 'created', 'approved', 'processing', 'delivered', 'canceled']
        
  - name: order_items
    description: Staged order_items data from Olist
    columns:
      - name: order_id
        description: The foreign key references order table 
        data_tests:
          - relationships:
              arguments:  
                to: ref('orders')
                field: order_id

  - name: products
    description: Staged products data
    columns:
      - name: product_id
        description: The primary key for product
        data_tests:
          - unique 
          - not_null

